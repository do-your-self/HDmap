layui.link("./script/search/search.css");layui.define(["layer","element","form","qRouter","laydate","table","config_interactivity","config_constant"],function(e){var a=layui.layer;var i=layui.element;var t=layui.form;var l=layui.qRouter;var c=layui.laydate;var n=layui.table;var s=layui.config_interactivity;var r=layui.config_constant;var d={search:function(e){var a=$("[id^='render-search']");a.empty();$.each(a,function(a,l){var c="";var n=$("#"+l.id);var d=n.data("componentData");c+='<div class="search-contain">';c+='<div class="search-flow">';c+='<form class="layui-form">';c+='<div class="search-select">';c+='<div class="search-contain">';c+='<div class="search-select">';c+='<div class="search-selectTitle">任务状态</div>';c+='<div class="search-selectBody">';c+='<select name="city" lay-verify="" lay-filter="search-FormSelect">';c+='<option value="">全部</option>';$.ajax({type:"get",async:false,url:r.URL_HEADER+"/taskstatus/find",success:function(e){$.each(e.result,function(e,a){c+='<option value="'+a.id+'">'+a.value+"</option>"})},error:function(e,a){}});c+="</select>";c+="</div>";c+="</div>";c+="</div>";c+="</div>";c+='<div class="search-select">';c+='<div class="search-selectBodyInput search-search">';c+='<div class="layui-input-inline">';c+='<input type="text" name="title" required lay-verify="required" placeholder="请输入搜索内容" autocomplete="off" class="layui-input" id="inputContent-'+l.id+'">';c+="</div>";c+="</div>";c+="</div>";c+='<div class="search-select">';c+='<div class="layui-btn layui-btn-normal search-button" id="searchButton-'+l.id+'">搜索</div>';c+="</div>";c+="</form>";c+="</div>";if(d.addButton!=undefined&&d.addButton!=null&&d.addButton.length>0){$.each(d.addButton,function(e,a){if(a.type=="PageJump"){c+='<div class="search-new-left">';c+='<a class="layui-btn layui-btn-normal" href="'+a.href+'">'+a.buttonName+"</a>";c+="</div>"}if(a.type=="Delete"){c+='<div class="search-new-left">';c+='<a class="layui-btn layui-btn-normal">'+a.buttonName+"</a>";c+="</div>"}if(a.type=="AdvancedSearch"){c+='<div class="search-new-left">';c+='<a class="layui-btn layui-btn-normal">'+a.buttonName+"</a>";c+="</div>";c+='<div class="search-select">';c+='<div class="search-selectTitle">时间范围</div>';c+='<div class="search-selectBodyInput">';c+='<div class="layui-input-inline">';c+='<input type="text" name="title" required lay-verify="required" placeholder="请选择开始时间" autocomplete="off" class="layui-input" id="startTime-'+l.id+'">';c+="</div>";c+="</div>";c+='<div class="search-selectBodyLine">';c+="<div>---------</div>";c+="</div>";c+='<div class="search-selectBodyInput">';c+='<div class="layui-input-inline">';c+='<input type="text" name="title" required lay-verify="required" placeholder="请选择结束时间" autocomplete="off" class="layui-input" id="endTime-'+l.id+'">';c+="</div>";c+="</div>";c+="</div>"}})}c+="</div>";n.append(c);i.init();t.render();var u="";t.on("select(search-FormSelect)",function(e){u=e.value});$("#searchButton-"+l.id).on("click",function(){var a=$("#inputContent-"+l.id).val();var i={search:a,formSelectValue:u};var t=null;if(s!=undefined&&s!=null&&s.length>0){$.each(s,function(a,l){if(l.routesName==e){var c=l.interactivity;$.each(c,function(e,a){if(a.controller=="search"){$.each(a.controlled,function(e,a){if(a.name=="tableList"){layui.tableList.changeData(a.index,i,t)}})}})}})}})})}};e("search",d)});