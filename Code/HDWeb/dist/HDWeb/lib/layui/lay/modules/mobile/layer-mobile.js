layui.define(function(e){"use strict";var t=window,i=document,n="querySelectorAll",a="getElementsByClassName",s=function(e){return i[n](e)};var l={type:0,shade:true,shadeClose:true,fixed:true,anim:"scale"};var r={extend:function(e){var t=JSON.parse(JSON.stringify(l));for(var i in e){t[i]=e[i]}return t},timer:{},end:{}};r.touch=function(e,t){e.addEventListener("click",function(e){t.call(this,e)},false)};var o=0,d=["layui-m-layer"],c=function(e){var t=this;t.config=r.extend(e);t.view()};c.prototype.view=function(){var e=this,t=e.config,n=i.createElement("div");e.id=n.id=d[0]+o;n.setAttribute("class",d[0]+" "+d[0]+(t.type||0));n.setAttribute("index",o);var l=function(){var e=typeof t.title==="object";return t.title?'<h3 style="'+(e?t.title[1]:"")+'">'+(e?t.title[0]:t.title)+"</h3>":""}();var r=function(){typeof t.btn==="string"&&(t.btn=[t.btn]);var e=(t.btn||[]).length,i;if(e===0||!t.btn){return""}i='<span yes type="1">'+t.btn[0]+"</span>";if(e===2){i='<span no type="0">'+t.btn[1]+"</span>"+i}return'<div class="layui-m-layerbtn">'+i+"</div>"}();if(!t.fixed){t.top=t.hasOwnProperty("top")?t.top:100;t.style=t.style||"";t.style+=" top:"+(i.body.scrollTop+t.top)+"px"}if(t.type===2){t.content='<i></i><i class="layui-m-layerload"></i><i></i><p>'+(t.content||"")+"</p>"}if(t.skin)t.anim="up";if(t.skin==="msg")t.shade=false;n.innerHTML=(t.shade?"<div "+(typeof t.shade==="string"?'style="'+t.shade+'"':"")+' class="layui-m-layershade"></div>':"")+'<div class="layui-m-layermain" '+(!t.fixed?'style="position:static;"':"")+">"+'<div class="layui-m-layersection">'+'<div class="layui-m-layerchild '+(t.skin?"layui-m-layer-"+t.skin+" ":"")+(t.className?t.className:"")+" "+(t.anim?"layui-m-anim-"+t.anim:"")+'" '+(t.style?'style="'+t.style+'"':"")+">"+l+'<div class="layui-m-layercont">'+t.content+"</div>"+r+"</div>"+"</div>"+"</div>";if(!t.type||t.type===2){var c=i[a](d[0]+t.type),u=c.length;if(u>=1){y.close(c[0].getAttribute("index"))}}document.body.appendChild(n);var f=e.elem=s("#"+e.id)[0];t.success&&t.success(f);e.index=o++;e.action(t,f)};c.prototype.action=function(e,t){var i=this;if(e.time){r.timer[i.index]=setTimeout(function(){y.close(i.index)},e.time*1e3)}var n=function(){var t=this.getAttribute("type");if(t==0){e.no&&e.no();y.close(i.index)}else{e.yes?e.yes(i.index):y.close(i.index)}};if(e.btn){var s=t[a]("layui-m-layerbtn")[0].children,l=s.length;for(var o=0;o<l;o++){r.touch(s[o],n)}}if(e.shade&&e.shadeClose){var d=t[a]("layui-m-layershade")[0];r.touch(d,function(){y.close(i.index,e.end)})}e.end&&(r.end[i.index]=e.end)};var y={v:"2.0 m",index:o,open:function(e){var t=new c(e||{});return t.index},close:function(e){var t=s("#"+d[0]+e)[0];if(!t)return;t.innerHTML="";i.body.removeChild(t);clearTimeout(r.timer[e]);delete r.timer[e];typeof r.end[e]==="function"&&r.end[e]();delete r.end[e]},closeAll:function(){var e=i[a](d[0]);for(var t=0,n=e.length;t<n;t++){y.close(e[0].getAttribute("index")|0)}}};e("layer-mobile",y)});