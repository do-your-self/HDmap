layui.define("jquery",function(e){"use strict";var r=layui.$,t=function(e){},i="layui-flow-more",l='<i class="layui-anim layui-anim-rotate layui-anim-loop layui-icon ">&#xe63e;</i>';t.prototype.load=function(e){var t=this,i=0,o,n,a,f;e=e||{};var u=r(e.elem);if(!u[0])return;var c=r(e.scrollElem||document);var m=e.mb||50;var s="isAuto"in e?e.isAuto:true;var v=e.end||"没有更多了";var y=e.scrollElem&&e.scrollElem!==document;var d="<cite>加载更多</cite>",h=r('<div class="layui-flow-more"><a href="javascript:;">'+d+"</a></div>");if(!u.find(".layui-flow-more")[0]){u.append(h)}var p=function(e,t){e=r(e);h.before(e);t=t==0?true:null;t?h.html(v):h.find("a").html(d);n=t;o=null;a&&a()};var g=function(){o=true;h.find("a").html(l);typeof e.done==="function"&&e.done(++i,p)};g();h.find("a").on("click",function(){var e=r(this);if(n)return;o||g()});if(e.isLazyimg){var a=t.lazyimg({elem:e.elem+" img",scrollElem:e.scrollElem})}if(!s)return t;c.on("scroll",function(){var e=r(this),t=e.scrollTop();if(f)clearTimeout(f);if(n)return;f=setTimeout(function(){var i=y?e.height():r(window).height();var l=y?e.prop("scrollHeight"):document.documentElement.scrollHeight;if(l-t-i<=m){o||g()}},100)});return t};t.prototype.lazyimg=function(e){var t=this,i=0,l;e=e||{};var o=r(e.scrollElem||document);var n=e.elem||"img";var a=e.scrollElem&&e.scrollElem!==document;var f=function(e,r){var l=o.scrollTop(),n=l+r;var f=a?function(){return e.offset().top-o.offset().top+l}():e.offset().top;if(f>=l&&f<=n){if(!e.attr("src")){var c=e.attr("lay-src");layui.img(c,function(){var r=t.lazyimg.elem.eq(i);e.attr("src",c).removeAttr("lay-src");r[0]&&u(r);i++})}}},u=function(e,l){var u=a?(l||o).height():r(window).height();var c=o.scrollTop(),m=c+u;t.lazyimg.elem=r(n);if(e){f(e,u)}else{for(var s=0;s<t.lazyimg.elem.length;s++){var v=t.lazyimg.elem.eq(s),y=a?function(){return v.offset().top-o.offset().top+c}():v.offset().top;f(v,u);i=s;if(y>m)break}}};u();if(!l){var c;o.on("scroll",function(){var e=r(this);if(c)clearTimeout(c);c=setTimeout(function(){u(null,e)},50)});l=true}return u};e("flow",new t)});