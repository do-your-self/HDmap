layui.define(["laytpl","laypage","layer","form"],function(e){"use strict";var t=layui.$,i=layui.laytpl,a=layui.laypage,l=layui.layer,n=layui.form,r=layui.hint(),o=layui.device(),d={config:{checkName:"LAY_CHECKED",indexName:"LAY_TABLE_INDEX"},cache:{},index:layui.table?layui.table.index+1e4:0,set:function(e){var i=this;i.config=t.extend({},i.config,e);return i},on:function(e,t){return layui.onevent.call(this,s,e,t)}},c=function(){var e=this,t=e.config,i=t.id;i&&(c.config[i]=t);return{reload:function(t){e.reload.call(e,t)},config:t}},s="table",u=".layui-table",f="layui-this",h="layui-show",y="layui-hide",p="layui-disabled",m="layui-none",v="layui-table-view",g=".layui-table-header",x=".layui-table-body",b=".layui-table-main",k=".layui-table-fixed",C=".layui-table-fixed-l",w=".layui-table-fixed-r",N=".layui-table-tool",F=".layui-table-page",T=".layui-table-sort",W="layui-table-edit",M="layui-table-hover",z=function(e){var t='{{#if(item2.colspan){}} colspan="{{item2.colspan}}"{{#} if(item2.rowspan){}} rowspan="{{item2.rowspan}}"{{#}}}';e=e||{};return['<table cellspacing="0" cellpadding="0" border="0" class="layui-table" ','{{# if(d.data.skin){ }}lay-skin="{{d.data.skin}}"{{# } }} {{# if(d.data.size){ }}lay-size="{{d.data.size}}"{{# } }} {{# if(d.data.even){ }}lay-even{{# } }}>',"<thead>","{{# layui.each(d.data.cols, function(i1, item1){ }}","<tr>","{{# layui.each(item1, function(i2, item2){ }}",'{{# if(item2.fixed && item2.fixed !== "right"){ left = true; } }}','{{# if(item2.fixed === "right"){ right = true; } }}',function(){if(e.fixed&&e.fixed!=="right"){return'{{# if(item2.fixed && item2.fixed !== "right"){ }}'}if(e.fixed==="right"){return'{{# if(item2.fixed === "right"){ }}'}return""}(),'<th data-field="{{ item2.field||i2 }}" {{# if(item2.minWidth){ }}data-minwidth="{{item2.minWidth}}"{{# } }} '+t+' {{# if(item2.unresize){ }}data-unresize="true"{{# } }}>','<div class="layui-table-cell laytable-cell-',"{{# if(item2.colspan > 1){ }}","group","{{# } else { }}","{{d.index}}-{{item2.field || i2}}",'{{# if(item2.type !== "normal"){ }}'," laytable-cell-{{ item2.type }}","{{# } }}","{{# } }}",'" {{#if(item2.align){}}align="{{item2.align}}"{{#}}}>','{{# if(item2.type === "checkbox"){ }}','<input type="checkbox" name="layTableCheckbox" lay-skin="primary" lay-filter="layTableAllChoose" {{# if(item2[d.data.checkName]){ }}checked{{# }; }}>',"{{# } else { }}",'<span>{{item2.title||""}}</span>',"{{# if(!(item2.colspan > 1) && item2.sort){ }}",'<span class="layui-table-sort layui-inline"><i class="layui-edge layui-table-sort-asc"></i><i class="layui-edge layui-table-sort-desc"></i></span>',"{{# } }}","{{# } }}","</div>","</th>",e.fixed?"{{# }; }}":"","{{# }); }}","</tr>","{{# }); }}","</thead>","</table>"].join("")},A=['<table cellspacing="0" cellpadding="0" border="0" class="layui-table" ','{{# if(d.data.skin){ }}lay-skin="{{d.data.skin}}"{{# } }} {{# if(d.data.size){ }}lay-size="{{d.data.size}}"{{# } }} {{# if(d.data.even){ }}lay-even{{# } }}>',"<tbody></tbody>","</table>"].join(""),S=['<div class="layui-form layui-border-box {{d.VIEW_CLASS}}" lay-filter="LAY-table-{{d.index}}" style="{{# if(d.data.width){ }}width:{{d.data.width}}px;{{# } }} {{# if(d.data.height){ }}height:{{d.data.height}}px;{{# } }}">',"{{# if(d.data.toolbar){ }}",'<div class="layui-table-tool"></div>',"{{# } }}",'<div class="layui-table-box">',"{{# var left, right; }}",'<div class="layui-table-header">',z(),"</div>",'<div class="layui-table-body layui-table-main">',A,"</div>","{{# if(left){ }}",'<div class="layui-table-fixed layui-table-fixed-l">','<div class="layui-table-header">',z({fixed:true}),"</div>",'<div class="layui-table-body">',A,"</div>","</div>","{{# }; }}","{{# if(right){ }}",'<div class="layui-table-fixed layui-table-fixed-r">','<div class="layui-table-header">',z({fixed:"right"}),'<div class="layui-table-mend"></div>',"</div>",'<div class="layui-table-body">',A,"</div>","</div>","{{# }; }}","</div>","{{# if(d.data.page){ }}",'<div class="layui-table-page">','<div id="layui-table-page{{d.index}}"></div>',"</div>","{{# } }}","<style>","{{# layui.each(d.data.cols, function(i1, item1){","layui.each(item1, function(i2, item2){ }}",".laytable-cell-{{d.index}}-{{item2.field||i2}}{ ","{{# if(item2.width){ }}","width: {{item2.width}}px;","{{# } }}"," }","{{# });","}); }}","</style>","</div>"].join(""),H=t(window),D=t(document),L=function(e){var i=this;i.index=++d.index;i.config=t.extend({},i.config,d.config,e);i.render()};L.prototype.config={limit:10,loading:true,cellMinWidth:60,text:{none:"无数据"}};L.prototype.render=function(){var e=this,a=e.config;a.elem=t(a.elem);a.where=a.where||{};a.id=a.id||a.elem.attr("id");a.request=t.extend({pageName:"page",limitName:"limit"},a.request);a.response=t.extend({statusName:"code",statusCode:0,msgName:"msg",dataName:"data",countName:"count"},a.response);if(typeof a.page==="object"){a.limit=a.page.limit||a.limit;a.limits=a.page.limits||a.limits;e.page=a.page.curr=a.page.curr||1;delete a.page.elem;delete a.page.jump}if(!a.elem[0])return e;e.setArea();var l=a.elem,n=l.next("."+v),r=e.elem=t(i(S).render({VIEW_CLASS:v,data:a,index:e.index}));a.index=e.index;n[0]&&n.remove();l.after(r);e.layHeader=r.find(g);e.layMain=r.find(b);e.layBody=r.find(x);e.layFixed=r.find(k);e.layFixLeft=r.find(C);e.layFixRight=r.find(w);e.layTool=r.find(N);e.layPage=r.find(F);e.layTool.html(i(t(a.toolbar).html()||"").render(a));if(a.height)e.fullSize();if(a.cols.length>1){var o=e.layFixed.find(g).find("th");o.height(e.layHeader.height()-1-parseFloat(o.css("padding-top"))-parseFloat(o.css("padding-bottom")))}e.pullData(e.page);e.events()};L.prototype.initOpts=function(e){var t=this,i=t.config,a={checkbox:48,space:15,numbers:40};if(e.checkbox)e.type="checkbox";if(e.space)e.type="space";if(!e.type)e.type="normal";if(e.type!=="normal"){e.unresize=true;e.width=e.width||a[e.type]}};L.prototype.setArea=function(){var e=this,t=e.config,i=0,a=0,l=0,n=0,r=t.width||function(){var e=function(i){var a,l;i=i||t.elem.parent();a=i.width();try{l=i.css("display")==="none"}catch(e){}if(i[0]&&(!a||l))return e(i.parent());return a};return e()}();e.eachCols(function(){i++});r=r-function(){return t.skin==="line"||t.skin==="nob"?2:i+1}();layui.each(t.cols,function(t,i){layui.each(i,function(t,l){var o;if(!l){i.splice(t,1);return}e.initOpts(l);o=l.width||0;if(l.colspan>1)return;if(/\d+%$/.test(o)){l.width=o=Math.floor(parseFloat(o)/100*r)}else if(!o){l.width=o=0;a++}n=n+o})});e.autoColNums=a;r>n&&a&&(l=(r-n)/a);layui.each(t.cols,function(e,i){layui.each(i,function(e,i){var a=i.minWidth||t.cellMinWidth;if(i.colspan>1)return;if(i.width===0){i.width=Math.floor(l>=a?l:a)}})});if(t.height&&/^full-\d+$/.test(t.height)){e.fullHeightGap=t.height.split("-")[1];t.height=H.height()-e.fullHeightGap}};L.prototype.reload=function(e){var i=this;if(i.config.data&&i.config.data.constructor===Array)delete i.config.data;i.config=t.extend({},i.config,e);i.render()};L.prototype.page=1;L.prototype.pullData=function(e,i){var a=this,n=a.config,r=n.request,o=n.response,d=function(){if(typeof n.initSort==="object"){a.sort(n.initSort.field,n.initSort.type)}};a.startTime=(new Date).getTime();if(n.url){var c={};c[r.pageName]=e;c[r.limitName]=n.limit;if(n.method=="post"){var s=t.extend(c,n.where);t.ajax({type:n.method||"get",url:n.url,data:JSON.stringify(s),dataType:"json",contentType:"application/json",success:function(t){if(t[o.statusName]!=o.statusCode){a.renderForm();a.layMain.html('<div class="'+m+'">'+(t[o.msgName]||"返回的数据状态异常")+"</div>")}else{a.renderData(t,e,t[o.countName]),d();n.time=(new Date).getTime()-a.startTime+" ms"}i&&l.close(i);typeof n.done==="function"&&n.done(t,e,t[o.countName])},error:function(e,t){a.layMain.html('<div class="'+m+'">数据接口请求异常</div>');a.renderForm();i&&l.close(i)}})}else{t.ajax({type:n.method||"get",url:n.url,data:t.extend(c,n.where),dataType:"json",success:function(t){if(t[o.statusName]!=o.statusCode){a.renderForm();a.layMain.html('<div class="'+m+'">'+(t[o.msgName]||"返回的数据状态异常")+"</div>")}else{a.renderData(t,e,t[o.countName]),d();n.time=(new Date).getTime()-a.startTime+" ms"}i&&l.close(i);typeof n.done==="function"&&n.done(t,e,t[o.countName])},error:function(e,t){a.layMain.html('<div class="'+m+'">数据接口请求异常</div>');a.renderForm();i&&l.close(i)}})}}else if(n.data&&n.data.constructor===Array){var u={},f=e*n.limit-n.limit;u[o.dataName]=n.data.concat().splice(f,n.limit);u[o.countName]=n.data.length;a.renderData(u,e,n.data.length),d();typeof n.done==="function"&&n.done(u,e,u[o.countName])}};L.prototype.eachCols=function(e){var i=t.extend(true,[],this.config.cols),a=[],l=0;layui.each(i,function(e,t){layui.each(t,function(t,n){if(n.colspan>1){var r=0;l++;n.CHILD_COLS=[];layui.each(i[e+1],function(e,t){if(t.PARENT_COL||r==n.colspan)return;t.PARENT_COL=l;n.CHILD_COLS.push(t);r=r+(t.colspan>1?t.colspan:1)})}if(n.PARENT_COL)return;a.push(n)})});var n=function(t){layui.each(t||a,function(t,i){if(i.CHILD_COLS)return n(i.CHILD_COLS);e(t,i)})};n()};L.prototype.renderData=function(e,n,r,o){var c=this,s=c.config,u=e[s.response.dataName]||[],f=[],h=[],p=[],v=function(){if(!o&&c.sortKey){return c.sort(c.sortKey.field,c.sortKey.sort,true)}layui.each(u,function(e,a){var l=[],r=[],u=[],y=e+s.limit*(n-1)+1;if(a.length===0)return;if(!o){a[d.config.indexName]=e}c.eachCols(function(e,n){var o=n.field||e,f=a[o],h=c.getColElem(c.layHeader,o);if(f===undefined||f===null)f="";if(n.colspan>1)return;var p=['<td data-field="'+o+'" '+function(){var e=[];if(n.edit)e.push('data-edit="'+n.edit+'"');if(n.align)e.push('align="'+n.align+'"');if(n.templet)e.push('data-content="'+f+'"');if(n.toolbar)e.push('data-off="true"');if(n.event)e.push('lay-event="'+n.event+'"');if(n.style)e.push('style="'+n.style+'"');if(n.minWidth)e.push('data-minwidth="'+n.minWidth+'"');return e.join(" ")}()+">",'<div class="layui-table-cell laytable-cell-'+function(){var e=s.index+"-"+o;return n.type==="normal"?e:e+" laytable-cell-"+n.type}()+'">'+function(){var e=t.extend(true,{LAY_INDEX:y},a);if(n.type==="checkbox"){return'<input type="checkbox" name="layTableCheckbox" lay-skin="primary" '+function(){var t=d.config.checkName;if(n[t]){a[t]=n[t];return n[t]?"checked":""}return e[t]?"checked":""}()+">"}else if(n.type==="numbers"){return y}if(n.toolbar){return i(t(n.toolbar).html()||"").render(e)}return n.templet?function(){return typeof n.templet==="function"?n.templet(e):i(t(n.templet).html()||String(f)).render(e)}():f}(),"</div></td>"].join("");l.push(p);if(n.fixed&&n.fixed!=="right")r.push(p);if(n.fixed==="right")u.push(p)});f.push('<tr data-index="'+e+'">'+l.join("")+"</tr>");h.push('<tr data-index="'+e+'">'+r.join("")+"</tr>");p.push('<tr data-index="'+e+'">'+u.join("")+"</tr>")});c.layBody.scrollTop(0);c.layMain.find("."+m).remove();c.layMain.find("tbody").html(f.join(""));c.layFixLeft.find("tbody").html(h.join(""));c.layFixRight.find("tbody").html(p.join(""));c.renderForm();c.syncCheckAll();c.haveInit?c.scrollPatch():setTimeout(function(){c.scrollPatch()},50);c.haveInit=true;l.close(c.tipsIndex)};c.key=s.id||s.index;d.cache[c.key]=u;c.layPage[u.length===0&&n==1?"addClass":"removeClass"](y);if(o){return v()}if(u.length===0){c.renderForm();c.layFixed.remove();c.layMain.find("tbody").html("");c.layMain.find("."+m).remove();return c.layMain.append('<div class="'+m+'">'+s.text.none+"</div>")}v();if(s.page){s.page=t.extend({elem:"layui-table-page"+s.index,count:r,limit:s.limit,limits:s.limits||[10,20,30,40,50,60,70,80,90],groups:3,layout:["prev","page","next","skip","count","limit"],prev:'<i class="layui-icon">&#xe603;</i>',next:'<i class="layui-icon">&#xe602;</i>',jump:function(e,t){if(!t){c.page=e.curr;s.limit=e.limit;c.pullData(e.curr,c.loading())}}},s.page);s.page.count=r;a.render(s.page)}};L.prototype.getColElem=function(e,t){var i=this,a=i.config;return e.eq(0).find(".laytable-cell-"+(a.index+"-"+t)+":eq(0)")};L.prototype.renderForm=function(e){n.render(e,"LAY-table-"+this.index)};L.prototype.sort=function(e,i,a,l){var n=this,o,c={},u=n.config,f=u.elem.attr("lay-filter"),h=d.cache[n.key],y;if(typeof e==="string"){n.layHeader.find("th").each(function(i,a){var l=t(this),n=l.data("field");if(n===e){e=l;o=n;return false}})}try{var o=o||e.data("field");if(n.sortKey&&!a){if(o===n.sortKey.field&&i===n.sortKey.sort){return}}var p=n.layHeader.find("th .laytable-cell-"+u.index+"-"+o).find(T);n.layHeader.find("th").find(T).removeAttr("lay-sort");p.attr("lay-sort",i||null);n.layFixed.find("th")}catch(e){return r.error("Table modules: Did not match to field")}n.sortKey={field:o,sort:i};if(i==="asc"){y=layui.sort(h,o)}else if(i==="desc"){y=layui.sort(h,o,true)}else{y=layui.sort(h,d.config.indexName);delete n.sortKey}c[u.response.dataName]=y;n.renderData(c,n.page,n.count,true);if(l){layui.event.call(e,s,"sort("+f+")",{field:o,type:i})}};L.prototype.loading=function(){var e=this,t=e.config;if(t.loading&&t.url){return l.msg("数据请求中",{icon:16,offset:[e.elem.offset().top+e.elem.height()/2-35-H.scrollTop()+"px",e.elem.offset().left+e.elem.width()/2-90-H.scrollLeft()+"px"],time:-1,anim:-1,fixed:false})}};L.prototype.setCheckData=function(e,t){var i=this,a=i.config,l=d.cache[i.key];if(!l[e])return;if(l[e].constructor===Array)return;l[e][a.checkName]=t};L.prototype.syncCheckAll=function(){var e=this,t=e.config,i=e.layHeader.find('input[name="layTableCheckbox"]'),a=function(i){e.eachCols(function(e,a){if(a.type==="checkbox"){a[t.checkName]=i}});return i};if(!i[0])return;if(d.checkStatus(e.key).isAll){if(!i[0].checked){i.prop("checked",true);e.renderForm("checkbox")}a(true)}else{if(i[0].checked){i.prop("checked",false);e.renderForm("checkbox")}a(false)}};L.prototype.getCssRule=function(e,t){var i=this,a=i.elem.find("style")[0],l=a.sheet||a.styleSheet||{},n=l.cssRules||l.rules;layui.each(n,function(a,l){if(l.selectorText===".laytable-cell-"+i.index+"-"+e){return t(l),true}})};L.prototype.fullSize=function(){var e=this,t=e.config,i=t.height,a;if(e.fullHeightGap){i=H.height()-e.fullHeightGap;if(i<135)i=135;e.elem.css("height",i)}a=parseFloat(i)-parseFloat(e.layHeader.height())-1;if(t.toolbar){a=a-e.layTool.outerHeight()}if(t.page){a=a-e.layPage.outerHeight()-1}e.layMain.css("height",a)};L.prototype.getScrollWidth=function(e){var t=0;if(e){t=e.offsetWidth-e.clientWidth}else{e=document.createElement("div");e.style.width="100px";e.style.height="100px";e.style.overflowY="scroll";document.body.appendChild(e);t=e.offsetWidth-e.clientWidth;document.body.removeChild(e)}return t};L.prototype.scrollPatch=function(){var e=this,i=e.layMain.children("table"),a=e.layMain.width()-e.layMain.prop("clientWidth"),l=e.layMain.height()-e.layMain.prop("clientHeight"),n=e.getScrollWidth(e.layMain[0]),r=i.outerWidth()-e.layMain.width();if(e.autoColNums&&r<5&&!e.scrollPatchWStatus){var o=e.layHeader.eq(0).find("thead th:last-child"),d=o.data("field");e.getCssRule(d,function(t){var i=t.style.width||o.outerWidth();t.style.width=parseFloat(i)-n-r+"px";if(e.layMain.height()-e.layMain.prop("clientHeight")>0){t.style.width=parseFloat(t.style.width)-1+"px"}e.scrollPatchWStatus=true})}if(a&&l){if(!e.elem.find(".layui-table-patch")[0]){var c=t('<th class="layui-table-patch"><div class="layui-table-cell"></div></th>');c.find("div").css({width:a});e.layHeader.eq(0).find("thead tr").append(c)}}else{e.layHeader.eq(0).find(".layui-table-patch").remove()}var s=e.layMain.height(),u=s-l;e.layFixed.find(x).css("height",i.height()>u?u:"auto");e.layFixRight[r>0?"removeClass":"addClass"](y);e.layFixRight.css("right",a-1)};L.prototype.events=function(){var e=this,a=e.config,n=t("body"),r={},c=e.layHeader.find("th"),u,f=".layui-table-cell",h=a.elem.attr("lay-filter");c.on("mousemove",function(e){var i=t(this),a=i.offset().left,l=e.clientX-a;if(i.attr("colspan")>1||i.data("unresize")||r.resizeStart){return}r.allowResize=i.width()-l<=10;n.css("cursor",r.allowResize?"col-resize":"")}).on("mouseleave",function(){var e=t(this);if(r.resizeStart)return;n.css("cursor","")}).on("mousedown",function(i){var l=t(this);if(r.allowResize){var n=l.data("field");i.preventDefault();r.resizeStart=true;r.offset=[i.clientX,i.clientY];e.getCssRule(n,function(e){var t=e.style.width||l.outerWidth();r.rule=e;r.ruleWidth=parseFloat(t);r.minWidth=l.data("minwidth")||a.cellMinWidth})}});D.on("mousemove",function(t){if(r.resizeStart){t.preventDefault();if(r.rule){var i=r.ruleWidth+t.clientX-r.offset[0];if(i<r.minWidth)i=r.minWidth;r.rule.style.width=i+"px";l.close(e.tipsIndex)}u=1}}).on("mouseup",function(t){if(r.resizeStart){r={};n.css("cursor","");e.scrollPatch()}if(u===2){u=null}});c.on("click",function(){var i=t(this),a=i.find(T),l=a.attr("lay-sort"),n;if(!a[0]||u===1)return u=2;if(l==="asc"){n="desc"}else if(l==="desc"){n=null}else{n="asc"}e.sort(i,n,null,true)}).find(T+" .layui-edge ").on("click",function(i){var a=t(this),l=a.index(),n=a.parents("th").eq(0).data("field");layui.stope(i);if(l===0){e.sort(n,"asc",null,true)}else{e.sort(n,"desc",null,true)}});e.elem.on("click",'input[name="layTableCheckbox"]+',function(){var i=t(this).prev(),a=e.layBody.find('input[name="layTableCheckbox"]'),l=i.parents("tr").eq(0).data("index"),n=i[0].checked,r=i.attr("lay-filter")==="layTableAllChoose";if(r){a.each(function(t,i){i.checked=n;e.setCheckData(t,n)});e.syncCheckAll();e.renderForm("checkbox")}else{e.setCheckData(l,n);e.syncCheckAll()}layui.event.call(this,s,"checkbox("+h+")",{checked:n,data:d.cache[e.key]?d.cache[e.key][l]||{}:{},type:r?"all":"one"})});e.layBody.on("mouseenter","tr",function(){var i=t(this),a=i.index();e.layBody.find("tr:eq("+a+")").addClass(M)}).on("mouseleave","tr",function(){var i=t(this),a=i.index();e.layBody.find("tr:eq("+a+")").removeClass(M)});e.layBody.on("change","."+W,function(){var i=t(this),a=this.value,l=i.parent().data("field"),n=i.parents("tr").eq(0).data("index"),r=d.cache[e.key][n];r[l]=a;layui.event.call(this,s,"edit("+h+")",{value:a,data:r,field:l})}).on("blur","."+W,function(){var a,l=t(this),n=l.parent().data("field"),r=l.parents("tr").eq(0).data("index"),o=d.cache[e.key][r];e.eachCols(function(e,t){if(t.field==n&&t.templet){a=t.templet}});l.siblings(f).html(a?i(t(a).html()||this.value).render(o):this.value);l.parent().data("content",this.value);l.remove()});e.layBody.on("click","td",function(){var i=t(this),n=i.data("field"),r=i.data("edit"),d=i.children(f);l.close(e.tipsIndex);if(i.data("off"))return;if(r){if(r==="select"){}else{var c=t('<input class="layui-input '+W+'">');c[0].value=i.data("content")||d.text();i.find("."+W)[0]||i.append(c);c.focus()}return}if(d.find(".layui-form-switch,.layui-form-checkbox")[0])return;if(Math.round(d.prop("scrollWidth"))>Math.round(d.outerWidth())){e.tipsIndex=l.tips(['<div class="layui-table-tips-main" style="margin-top: -'+(d.height()+16)+"px;"+function(){if(a.size==="sm"){return"padding: 4px 15px; font-size: 12px;"}if(a.size==="lg"){return"padding: 14px 15px;"}return""}()+'">',d.html(),"</div>",'<i class="layui-icon layui-table-tips-c">&#x1006;</i>'].join(""),d[0],{tips:[3,""],time:-1,anim:-1,maxWidth:o.ios||o.android?300:600,isOutAnim:false,skin:"layui-table-tips",success:function(e,t){e.find(".layui-table-tips-c").on("click",function(){l.close(t)})}})}});e.layBody.on("click","*[lay-event]",function(){var a=t(this),l=a.parents("tr").eq(0).data("index"),n=e.layBody.find('tr[data-index="'+l+'"]'),r="layui-table-click",o=d.cache[e.key][l];layui.event.call(this,s,"tool("+h+")",{data:d.clearCacheKey(o),event:a.attr("lay-event"),tr:n,del:function(){d.cache[e.key][l]=[];n.remove();e.scrollPatch()},update:function(a){a=a||{};layui.each(a,function(a,l){if(a in o){var r,d=n.children('td[data-field="'+a+'"]');o[a]=l;e.eachCols(function(e,t){if(t.field==a&&t.templet){r=t.templet}});d.children(f).html(r?i(t(r).html()||l).render(o):l);d.data("content",l)}})}});n.addClass(r).siblings("tr").removeClass(r)});e.layMain.on("scroll",function(){var i=t(this),a=i.scrollLeft(),n=i.scrollTop();e.layHeader.scrollLeft(a);e.layFixed.find(x).scrollTop(n);l.close(e.tipsIndex)});H.on("resize",function(){e.fullSize();e.scrollPatch()})};d.init=function(e,i){i=i||{};var a=this,l=e?t('table[lay-filter="'+e+'"]'):t(u+"[lay-data]"),n="Table element property lay-data configuration item has a syntax error: ";l.each(function(){var a=t(this),l=a.attr("lay-data");try{l=new Function("return "+l)()}catch(e){r.error(n+l)}var o=[],c=t.extend({elem:this,cols:[],data:[],skin:a.attr("lay-skin"),size:a.attr("lay-size"),even:typeof a.attr("lay-even")==="string"},d.config,i,l);e&&a.hide();a.find("thead>tr").each(function(e){c.cols[e]=[];t(this).children().each(function(i){var a=t(this),l=a.attr("lay-data");try{l=new Function("return "+l)()}catch(e){return r.error(n+l)}var d=t.extend({title:a.text(),colspan:a.attr("colspan")||0,rowspan:a.attr("rowspan")||0},l);if(d.colspan<2)o.push(d);c.cols[e].push(d)})});a.find("tbody>tr").each(function(e){var i=t(this),a={};i.children("td").each(function(e,i){var l=t(this),n=l.data("field");if(n){return a[n]=l.html()}});layui.each(o,function(e,t){var l=i.children("td").eq(e);a[t.field]=l.html()});c.data[e]=a});d.render(c)});return a};d.checkStatus=function(e){var t=0,i=0,a=[],l=d.cache[e]||[];layui.each(l,function(e,l){if(l.constructor===Array){i++;return}if(l[d.config.checkName]){t++;a.push(d.clearCacheKey(l))}});return{data:a,isAll:l.length?t===l.length-i:false}};c.config={};d.reload=function(e,i){var a=c.config[e];i=i||{};if(!a)return r.error("The ID option was not found in the table instance");if(i.data&&i.data.constructor===Array)delete a.data;return d.render(t.extend(true,{},a,i))};d.render=function(e){var t=new L(e);return c.call(t)};d.clearCacheKey=function(e){e=t.extend({},e);delete e[d.config.checkName];delete e[d.config.indexName];return e};d.init();e(s,d)});