layui.define("jquery",function(e){"use strict";var a=layui.$,r=layui.hint();var i="layui-tree-enter",o=function(e){this.options=e};var t={arrow:["&#xe623;","&#xe625;"],checkbox:["&#xe626;","&#xe627;"],radio:["&#xe62b;","&#xe62a;"],branch:["&#xe622;","&#xe624;"],leaf:"&#xe621;"};o.prototype.init=function(e){var a=this;e.addClass("layui-box layui-tree");if(a.options.skin){e.addClass("layui-tree-skin-"+a.options.skin)}a.tree(e);a.on(e)};o.prototype.tree=function(e,r){var i=this,o=i.options;var n=r||o.nodes;layui.each(n,function(r,n){var l=n.children&&n.children.length>0;var c=a('<ul class="'+(n.spread?"layui-show":"")+'"></ul>');var s=a(["<li "+(n.spread?'data-spread="'+n.spread+'"':"")+">",function(){return l?'<i class="layui-icon layui-tree-spread">'+(n.spread?t.arrow[1]:t.arrow[0])+"</i>":""}(),function(){return o.check?'<i class="layui-icon layui-tree-check">'+(o.check==="checkbox"?t.checkbox[0]:o.check==="radio"?t.radio[0]:"")+"</i>":""}(),function(){return'<a href="'+(n.href||"javascript:;")+'" '+(o.target&&n.href?'target="'+o.target+'"':"")+">"+('<i class="layui-icon layui-tree-'+(l?"branch":"leaf")+'">'+(l?n.spread?t.branch[1]:t.branch[0]:t.leaf)+"</i>")+("<cite>"+(n.name||"未命名")+"</cite></a>")}(),"</li>"].join(""));if(l){s.append(c);i.tree(c,n.children)}e.append(s);typeof o.click==="function"&&i.click(s,n);i.spread(s,n);o.drag&&i.drag(s,n)})};o.prototype.click=function(e,a){var r=this,i=r.options;e.children("a").on("click",function(e){layui.stope(e);i.click(a)})};o.prototype.spread=function(e,a){var r=this,i=r.options;var o=e.children(".layui-tree-spread");var n=e.children("ul"),l=e.children("a");var c=function(){if(e.data("spread")){e.data("spread",null);n.removeClass("layui-show");o.html(t.arrow[0]);l.find(".layui-icon").html(t.branch[0])}else{e.data("spread",true);n.addClass("layui-show");o.html(t.arrow[1]);l.find(".layui-icon").html(t.branch[1])}};if(!n[0])return;o.on("click",c);l.on("dblclick",c)};o.prototype.on=function(e){var r=this,o=r.options;var t="layui-tree-drag";e.find("i").on("selectstart",function(e){return false});if(o.drag){a(document).on("mousemove",function(e){var i=r.move;if(i.from){var o=i.to,n=a('<div class="layui-box '+t+'"></div>');e.preventDefault();a("."+t)[0]||a("body").append(n);var l=a("."+t)[0]?a("."+t):n;l.addClass("layui-show").html(i.from.elem.children("a").html());l.css({left:e.pageX+10,top:e.pageY+10})}}).on("mouseup",function(){var e=r.move;if(e.from){e.from.elem.children("a").removeClass(i);e.to&&e.to.elem.children("a").removeClass(i);r.move={};a("."+t).remove()}})}};o.prototype.move={};o.prototype.drag=function(e,r){var o=this,t=o.options;var n=e.children("a"),l=function(){var t=a(this),n=o.move;if(n.from){n.to={item:r,elem:e};t.addClass(i)}};n.on("mousedown",function(){var a=o.move;a.from={item:r,elem:e}});n.on("mouseenter",l).on("mousemove",l).on("mouseleave",function(){var e=a(this),r=o.move;if(r.from){delete r.to;e.removeClass(i)}})};e("tree",function(e){var i=new o(e=e||{});var t=a(e.elem);if(!t[0]){return r.error("layui.tree 没有找到"+e.elem+"元素")}i.init(t)})});