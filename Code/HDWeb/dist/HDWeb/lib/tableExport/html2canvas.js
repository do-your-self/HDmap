(function(e,t,n){var r={},i,a,o;r.Util={};r.Util.log=function(t){if(r.logging&&e.console&&e.console.log){e.console.log(t)}};r.Util.trimText=function(e){return function(t){return e?e.apply(t):((t||"")+"").replace(/^\s+|\s+$/g,"")}}(String.prototype.trim);r.Util.asFloat=function(e){return parseFloat(e)};(function(){var e=/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g;var t=/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g;r.Util.parseTextShadows=function(n){if(!n||n==="none"){return[]}var r=n.match(e),i=[];for(var a=0;r&&a<r.length;a++){var o=r[a].match(t);i.push({color:o[0],offsetX:o[1]?o[1].replace("px",""):0,offsetY:o[2]?o[2].replace("px",""):0,blur:o[3]?o[3].replace("px",""):0})}return i}})();r.Util.parseBackgroundImage=function(e){var t=" \r\n\t",n,r,i,a,o,l=[],s,c=0,d=0,f,u;var h=function(){if(n){if(r.substr(0,1)==='"'){r=r.substr(1,r.length-2)}if(r){u.push(r)}if(n.substr(0,1)==="-"&&(a=n.indexOf("-",1)+1)>0){i=n.substr(0,a);n=n.substr(a)}l.push({prefix:i,method:n.toLowerCase(),value:o,args:u})}u=[];n=i=r=o=""};h();for(var p=0,g=e.length;p<g;p++){s=e[p];if(c===0&&t.indexOf(s)>-1){continue}switch(s){case'"':if(!f){f=s}else if(f===s){f=null}break;case"(":if(f){break}else if(c===0){c=1;o+=s;continue}else{d++}break;case")":if(f){break}else if(c===1){if(d===0){c=0;o+=s;h();continue}else{d--}}break;case",":if(f){break}else if(c===0){h();continue}else if(c===1){if(d===0&&!n.match(/^url$/i)){u.push(r);r="";o+=s;continue}}break}o+=s;if(c===0){n+=s}else{r+=s}}h();return l};r.Util.Bounds=function(e){var t,n={};if(e.getBoundingClientRect){t=e.getBoundingClientRect();n.top=t.top;n.bottom=t.bottom||t.top+t.height;n.left=t.left;n.width=e.offsetWidth;n.height=e.offsetHeight}return n};r.Util.OffsetBounds=function(e){var t=e.offsetParent?r.Util.OffsetBounds(e.offsetParent):{top:0,left:0};return{top:e.offsetTop+t.top,bottom:e.offsetTop+e.offsetHeight+t.top,left:e.offsetLeft+t.left,width:e.offsetWidth,height:e.offsetHeight}};function l(e,t,n){var r=e.runtimeStyle&&e.runtimeStyle[t],i,a=e.style;if(!/^-?[0-9]+\.?[0-9]*(?:px)?$/i.test(n)&&/^-?\d/.test(n)){i=a.left;if(r){e.runtimeStyle.left=e.currentStyle.left}a.left=t==="fontSize"?"1em":n||0;n=a.pixelLeft+"px";a.left=i;if(r){e.runtimeStyle.left=r}}if(!/^(thin|medium|thick)$/i.test(n)){return Math.round(parseFloat(n))+"px"}return n}function s(e){return parseInt(e,10)}function c(e){return e.toString().indexOf("%")!==-1}function d(e,t,i,a){e=(e||"").split(",");e=e[a||0]||e[0]||"auto";e=r.Util.trimText(e).split(" ");if(i==="backgroundSize"&&(e[0]&&e[0].match(/^(cover|contain|auto)$/))){return e}else{e[0]=e[0].indexOf("%")===-1?l(t,i+"X",e[0]):e[0];if(e[1]===n){if(i==="backgroundSize"){e[1]="auto";return e}else{e[1]=e[0]}}e[1]=e[1].indexOf("%")===-1?l(t,i+"Y",e[1]):e[1]}return e}r.Util.getCSS=function(e,n,r){if(i!==e){a=t.defaultView.getComputedStyle(e,null)}var o=a[n];if(/^background(Size|Position)$/.test(n)){return d(o,e,n,r)}else if(/border(Top|Bottom)(Left|Right)Radius/.test(n)){var l=o.split(" ");if(l.length<=1){l[1]=l[0]}return l.map(s)}return o};r.Util.resizeBounds=function(e,t,n,r,i){var a=n/r,o=e/t,l,s;if(!i||i==="auto"){l=n;s=r}else if(a<o^i==="contain"){s=r;l=r*o}else{l=n;s=n/o}return{width:l,height:s}};r.Util.BackgroundPosition=function(e,t,n,i,a){var o=r.Util.getCSS(e,"backgroundPosition",i),l,s;if(o.length===1){o=[o[0],o[0]]}if(c(o[0])){l=(t.width-(a||n).width)*(parseFloat(o[0])/100)}else{l=parseInt(o[0],10)}if(o[1]==="auto"){s=l/n.width*n.height}else if(c(o[1])){s=(t.height-(a||n).height)*parseFloat(o[1])/100}else{s=parseInt(o[1],10)}if(o[0]==="auto"){l=s/n.height*n.width}return{left:l,top:s}};r.Util.BackgroundSize=function(e,t,n,i){var a=r.Util.getCSS(e,"backgroundSize",i),o,l;if(a.length===1){a=[a[0],a[0]]}if(c(a[0])){o=t.width*parseFloat(a[0])/100}else if(/contain|cover/.test(a[0])){return r.Util.resizeBounds(n.width,n.height,t.width,t.height,a[0])}else{o=parseInt(a[0],10)}if(a[0]==="auto"&&a[1]==="auto"){l=n.height}else if(a[1]==="auto"){l=o/n.width*n.height}else if(c(a[1])){l=t.height*parseFloat(a[1])/100}else{l=parseInt(a[1],10)}if(a[0]==="auto"){o=l/n.height*n.width}return{width:o,height:l}};r.Util.BackgroundRepeat=function(e,t){var n=r.Util.getCSS(e,"backgroundRepeat").split(",").map(r.Util.trimText);return n[t]||n[0]};r.Util.Extend=function(e,t){for(var n in e){if(e.hasOwnProperty(n)){t[n]=e[n]}}return t};r.Util.Children=function(e){var t;try{t=e.nodeName&&e.nodeName.toUpperCase()==="IFRAME"?e.contentDocument||e.contentWindow.document:function(e){var t=[];if(e!==null){(function(e,t){var r=e.length,i=0;if(typeof t.length==="number"){for(var a=t.length;i<a;i++){e[r++]=t[i]}}else{while(t[i]!==n){e[r++]=t[i++]}}e.length=r;return e})(t,e)}return t}(e.childNodes)}catch(e){r.Util.log("html2canvas.Util.Children failed with exception: "+e.message);t=[]}return t};r.Util.isTransparent=function(e){return!e||e==="transparent"||e==="rgba(0, 0, 0, 0)"};r.Util.Font=function(){var e={};return function(t,r,i){if(e[t+"-"+r]!==n){return e[t+"-"+r]}var a=i.createElement("div"),o=i.createElement("img"),l=i.createElement("span"),s="Hidden Text",c,d,f;a.style.visibility="hidden";a.style.fontFamily=t;a.style.fontSize=r;a.style.margin=0;a.style.padding=0;i.body.appendChild(a);o.src="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACwAAAAAAQABAAACAkQBADs=";o.width=1;o.height=1;o.style.margin=0;o.style.padding=0;o.style.verticalAlign="baseline";l.style.fontFamily=t;l.style.fontSize=r;l.style.margin=0;l.style.padding=0;l.appendChild(i.createTextNode(s));a.appendChild(l);a.appendChild(o);c=o.offsetTop-l.offsetTop+1;a.removeChild(l);a.appendChild(i.createTextNode(s));a.style.lineHeight="normal";o.style.verticalAlign="super";d=o.offsetTop-a.offsetTop+1;f={baseline:c,lineWidth:1,middle:d};e[t+"-"+r]=f;i.body.removeChild(a);return f}}();(function(){var e=r.Util,n={};r.Generate=n;var i=[/^(-webkit-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-gradient)\((linear|radial),\s((?:\d{1,3}%?)\s(?:\d{1,3}%?),\s(?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)\-]+)\)$/,/^(-moz-linear-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-moz-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s?([a-z\-]*)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/];n.parseGradient=function(e,t){var n,r,a=i.length,o,l,s,c,d,f,u,h,p,g;for(r=0;r<a;r+=1){o=e.match(i[r]);if(o){break}}if(o){switch(o[1]){case"-webkit-linear-gradient":case"-o-linear-gradient":n={type:"linear",x0:null,y0:null,x1:null,y1:null,colorStops:[]};s=o[2].match(/\w+/g);if(s){c=s.length;for(r=0;r<c;r+=1){switch(s[r]){case"top":n.y0=0;n.y1=t.height;break;case"right":n.x0=t.width;n.x1=0;break;case"bottom":n.y0=t.height;n.y1=0;break;case"left":n.x0=0;n.x1=t.width;break}}}if(n.x0===null&&n.x1===null){n.x0=n.x1=t.width/2}if(n.y0===null&&n.y1===null){n.y0=n.y1=t.height/2}s=o[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g);if(s){c=s.length;d=1/Math.max(c-1,1);for(r=0;r<c;r+=1){f=s[r].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/);if(f[2]){l=parseFloat(f[2]);if(f[3]==="%"){l/=100}else{l/=t.width}}else{l=r*d}n.colorStops.push({color:f[1],stop:l})}}break;case"-webkit-gradient":n={type:o[2]==="radial"?"circle":o[2],x0:0,y0:0,x1:0,y1:0,colorStops:[]};s=o[3].match(/(\d{1,3})%?\s(\d{1,3})%?,\s(\d{1,3})%?\s(\d{1,3})%?/);if(s){n.x0=s[1]*t.width/100;n.y0=s[2]*t.height/100;n.x1=s[3]*t.width/100;n.y1=s[4]*t.height/100}s=o[4].match(/((?:from|to|color-stop)\((?:[0-9\.]+,\s)?(?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)\))+/g);if(s){c=s.length;for(r=0;r<c;r+=1){f=s[r].match(/(from|to|color-stop)\(([0-9\.]+)?(?:,\s)?((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\)/);l=parseFloat(f[2]);if(f[1]==="from"){l=0}if(f[1]==="to"){l=1}n.colorStops.push({color:f[3],stop:l})}}break;case"-moz-linear-gradient":n={type:"linear",x0:0,y0:0,x1:0,y1:0,colorStops:[]};s=o[2].match(/(\d{1,3})%?\s(\d{1,3})%?/);if(s){n.x0=s[1]*t.width/100;n.y0=s[2]*t.height/100;n.x1=t.width-n.x0;n.y1=t.height-n.y0}s=o[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}%)?)+/g);if(s){c=s.length;d=1/Math.max(c-1,1);for(r=0;r<c;r+=1){f=s[r].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%)?/);if(f[2]){l=parseFloat(f[2]);if(f[3]){l/=100}}else{l=r*d}n.colorStops.push({color:f[1],stop:l})}}break;case"-webkit-radial-gradient":case"-moz-radial-gradient":case"-o-radial-gradient":n={type:"circle",x0:0,y0:0,x1:t.width,y1:t.height,cx:0,cy:0,rx:0,ry:0,colorStops:[]};s=o[2].match(/(\d{1,3})%?\s(\d{1,3})%?/);if(s){n.cx=s[1]*t.width/100;n.cy=s[2]*t.height/100}s=o[3].match(/\w+/);f=o[4].match(/[a-z\-]*/);if(s&&f){switch(f[0]){case"farthest-corner":case"cover":case"":u=Math.sqrt(Math.pow(n.cx,2)+Math.pow(n.cy,2));h=Math.sqrt(Math.pow(n.cx,2)+Math.pow(n.y1-n.cy,2));p=Math.sqrt(Math.pow(n.x1-n.cx,2)+Math.pow(n.y1-n.cy,2));g=Math.sqrt(Math.pow(n.x1-n.cx,2)+Math.pow(n.cy,2));n.rx=n.ry=Math.max(u,h,p,g);break;case"closest-corner":u=Math.sqrt(Math.pow(n.cx,2)+Math.pow(n.cy,2));h=Math.sqrt(Math.pow(n.cx,2)+Math.pow(n.y1-n.cy,2));p=Math.sqrt(Math.pow(n.x1-n.cx,2)+Math.pow(n.y1-n.cy,2));g=Math.sqrt(Math.pow(n.x1-n.cx,2)+Math.pow(n.cy,2));n.rx=n.ry=Math.min(u,h,p,g);break;case"farthest-side":if(s[0]==="circle"){n.rx=n.ry=Math.max(n.cx,n.cy,n.x1-n.cx,n.y1-n.cy)}else{n.type=s[0];n.rx=Math.max(n.cx,n.x1-n.cx);n.ry=Math.max(n.cy,n.y1-n.cy)}break;case"closest-side":case"contain":if(s[0]==="circle"){n.rx=n.ry=Math.min(n.cx,n.cy,n.x1-n.cx,n.y1-n.cy)}else{n.type=s[0];n.rx=Math.min(n.cx,n.x1-n.cx);n.ry=Math.min(n.cy,n.y1-n.cy)}break}}s=o[5].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g);if(s){c=s.length;d=1/Math.max(c-1,1);for(r=0;r<c;r+=1){f=s[r].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/);if(f[2]){l=parseFloat(f[2]);if(f[3]==="%"){l/=100}else{l/=t.width}}else{l=r*d}n.colorStops.push({color:f[1],stop:l})}}break}}return n};function a(t){return function(n){try{t.addColorStop(n.stop,n.color)}catch(t){e.log(["failed to add color stop: ",t,"; tried to add: ",n])}}}n.Gradient=function(e,n){if(n.width===0||n.height===0){return}var i=t.createElement("canvas"),o=i.getContext("2d"),l,s;i.width=n.width;i.height=n.height;l=r.Generate.parseGradient(e,n);if(l){switch(l.type){case"linear":s=o.createLinearGradient(l.x0,l.y0,l.x1,l.y1);l.colorStops.forEach(a(s));o.fillStyle=s;o.fillRect(0,0,n.width,n.height);break;case"circle":s=o.createRadialGradient(l.cx,l.cy,0,l.cx,l.cy,l.rx);l.colorStops.forEach(a(s));o.fillStyle=s;o.fillRect(0,0,n.width,n.height);break;case"ellipse":var c=t.createElement("canvas"),d=c.getContext("2d"),f=Math.max(l.rx,l.ry),u=f*2;c.width=c.height=u;s=d.createRadialGradient(l.rx,l.ry,0,l.rx,l.ry,f);l.colorStops.forEach(a(s));d.fillStyle=s;d.fillRect(0,0,u,u);o.fillStyle=l.colorStops[l.colorStops.length-1].color;o.fillRect(0,0,i.width,i.height);o.drawImage(c,l.cx-l.rx,l.cy-l.ry,2*l.rx,2*l.ry);break}}return i};n.ListAlpha=function(e){var t="",n;do{n=e%26;t=String.fromCharCode(n+64)+t;e=e/26}while(e*26>26);return t};n.ListRoman=function(e){var t=["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"],n=[1e3,900,500,400,100,90,50,40,10,9,5,4,1],r="",i,a=t.length;if(e<=0||e>=4e3){return e}for(i=0;i<a;i+=1){while(e>=n[i]){e-=n[i];r+=t[i]}}return r}})();function f(e,t){var n=[];return{storage:n,width:e,height:t,clip:function(){n.push({type:"function",name:"clip",arguments:arguments})},translate:function(){n.push({type:"function",name:"translate",arguments:arguments})},fill:function(){n.push({type:"function",name:"fill",arguments:arguments})},save:function(){n.push({type:"function",name:"save",arguments:arguments})},restore:function(){n.push({type:"function",name:"restore",arguments:arguments})},fillRect:function(){n.push({type:"function",name:"fillRect",arguments:arguments})},createPattern:function(){n.push({type:"function",name:"createPattern",arguments:arguments})},drawShape:function(){var e=[];n.push({type:"function",name:"drawShape",arguments:e});return{moveTo:function(){e.push({name:"moveTo",arguments:arguments})},lineTo:function(){e.push({name:"lineTo",arguments:arguments})},arcTo:function(){e.push({name:"arcTo",arguments:arguments})},bezierCurveTo:function(){e.push({name:"bezierCurveTo",arguments:arguments})},quadraticCurveTo:function(){e.push({name:"quadraticCurveTo",arguments:arguments})}}},drawImage:function(){n.push({type:"function",name:"drawImage",arguments:arguments})},fillText:function(){n.push({type:"function",name:"fillText",arguments:arguments})},setVariable:function(e,t){n.push({type:"variable",name:e,arguments:t});return t}}}r.Parse=function(i,a,o){e.scroll(0,0);var l=a.elements===n?t.body:a.elements[0],s=0,c=l.ownerDocument,d=r.Util,u=d.Support(a,c),h=new RegExp("("+a.ignoreElements+")"),p=c.body,g=d.getCSS,m="___html2canvas___pseudoelement",y=c.createElement("style");y.innerHTML="."+m+'-parent:before { content: "" !important; display: none !important; }'+"."+m+'-parent:after { content: "" !important; display: none !important; }';p.appendChild(y);i=i||{};b();function b(){var e=g(t.documentElement,"backgroundColor"),n=d.isTransparent(e)&&l===t.body,r=ve(l,null,false,n);w(l);Te(l,r,function(){if(n){e=r.backgroundColor}x();d.log("Done parsing, moving to Render.");o({backgroundColor:e,stack:r})})}function w(e){var n=[],r=[];i();a(e);l();function i(){var e=/:before|:after/;var n=t.styleSheets;for(var i=0,a=n.length;i<a;i++){try{var o=n[i].cssRules;for(var l=0,s=o.length;l<s;l++){if(e.test(o[l].selectorText)){r.push(o[l].selectorText)}}}catch(e){}}for(i=0,a=r.length;i<a;i++){r[i]=r[i].match(/(^[^:]*)/)[1]}}function a(e){var n=t.querySelectorAll(r.join(","));for(var i=0,a=n.length;i<a;i++){o(n[i])}}function o(e){var t=le(e,":before"),r=le(e,":after");if(t){n.push({type:"before",pseudo:t,el:e})}if(r){n.push({type:"after",pseudo:r,el:e})}}function l(){n.forEach(function(e){v(e.el,m+"-parent")});n.forEach(function(e){if(e.type==="before"){e.el.insertBefore(e.pseudo,e.el.firstChild)}else{e.el.appendChild(e.pseudo)}})}}function x(){p.removeChild(y);var e=t.getElementsByClassName(m+"-element");while(e.length){e[0].parentNode.removeChild(e[0])}var n=t.getElementsByClassName(m+"-parent");while(n.length){k(n[0],m+"-parent")}}function v(e,t){if(e.classList){e.classList.add(t)}else{e.className=e.className+" "+t}}function k(e,t){if(e.classList){e.classList.remove(t)}else{e.className=e.className.replace(t,"").trim()}}function C(e,t){return e.className.indexOf(t)>-1}function T(e){return Array.prototype.slice.call(e)}function S(){return Math.max(Math.max(c.body.scrollWidth,c.documentElement.scrollWidth),Math.max(c.body.offsetWidth,c.documentElement.offsetWidth),Math.max(c.body.clientWidth,c.documentElement.clientWidth))}function E(){return Math.max(Math.max(c.body.scrollHeight,c.documentElement.scrollHeight),Math.max(c.body.offsetHeight,c.documentElement.offsetHeight),Math.max(c.body.clientHeight,c.documentElement.clientHeight))}function R(e,t){var n=parseInt(g(e,t),10);return isNaN(n)?0:n}function M(e,t,n,r,i,a){if(a!=="transparent"){e.setVariable("fillStyle",a);e.fillRect(t,n,r,i);s+=1}}function I(e,t,n){if(e.length>0){return t+n.toUpperCase()}}function L(e,t){switch(t){case"lowercase":return e.toLowerCase();case"capitalize":return e.replace(/(^|\s|:|-|\(|\))([a-z])/g,I);case"uppercase":return e.toUpperCase();default:return e}}function O(e){return/^(normal|none|0px)$/.test(e)}function z(e,t,n,r){if(e!==null&&d.trimText(e).length>0){r.fillText(e,t,n);s+=1}}function A(e,t,n,r){var i=false,a=g(t,"fontWeight"),o=g(t,"fontFamily"),l=g(t,"fontSize"),s=d.parseTextShadows(g(t,"textShadow"));switch(parseInt(a,10)){case 401:a="bold";break;case 400:a="normal";break}e.setVariable("fillStyle",r);e.setVariable("font",[g(t,"fontStyle"),g(t,"fontVariant"),a,l,o].join(" "));e.setVariable("textAlign",i?"right":"left");if(s.length){e.setVariable("shadowColor",s[0].color);e.setVariable("shadowOffsetX",s[0].offsetX);e.setVariable("shadowOffsetY",s[0].offsetY);e.setVariable("shadowBlur",s[0].blur)}if(n!=="none"){return d.Font(o,l,c)}}function B(e,t,n,r,i){switch(t){case"underline":M(e,n.left,Math.round(n.top+r.baseline+r.lineWidth),n.width,1,i);break;case"overline":M(e,n.left,Math.round(n.top),n.width,1,i);break;case"line-through":M(e,n.left,Math.ceil(n.top+r.middle+r.lineWidth),n.width,1,i);break}}function U(e,t,n,r,i){var a;if(u.rangeBounds&&!i){if(n!=="none"||d.trimText(t).length!==0){a=N(t,e.node,e.textOffset)}e.textOffset+=t.length}else if(e.node&&typeof e.node.nodeValue==="string"){var o=r?e.node.splitText(t.length):null;a=P(e.node,i);e.node=o}return a}function N(e,t,n){var r=c.createRange();r.setStart(t,n);r.setEnd(t,n+e.length);return r.getBoundingClientRect()}function P(e,t){var n=e.parentNode,r=c.createElement("wrapper"),i=e.cloneNode(true);r.appendChild(e.cloneNode(true));n.replaceChild(r,e);var a=t?d.OffsetBounds(r):d.Bounds(r);n.replaceChild(i,r);return a}function F(e,t,n){var r=n.ctx,i=g(e,"color"),o=g(e,"textDecoration"),l=g(e,"textAlign"),s,c,f={node:t,textOffset:0};if(d.trimText(t.nodeValue).length>0){t.nodeValue=L(t.nodeValue,g(e,"textTransform"));l=l.replace(["-webkit-auto"],["auto"]);c=!a.letterRendering&&/^(left|right|justify|auto)$/.test(l)&&O(g(e,"letterSpacing"))?t.nodeValue.split(/(\b| )/):t.nodeValue.split("");s=A(r,e,o,i);if(a.chinese){c.forEach(function(e,t){if(/.*[\u4E00-\u9FA5].*$/.test(e)){e=e.split("");e.unshift(t,1);c.splice.apply(c,e)}})}c.forEach(function(e,t){var a=U(f,e,o,t<c.length-1,n.transform.matrix);if(a){z(e,a.left,a.bottom,r);B(r,o,a,s,i)}})}}function V(e,t){var n=c.createElement("boundelement"),r,i;n.style.display="inline";r=e.style.listStyleType;e.style.listStyleType="none";n.appendChild(c.createTextNode(t));e.insertBefore(n,e.firstChild);i=d.Bounds(n);e.removeChild(n);e.style.listStyleType=r;return i}function D(e){var t=-1,n=1,r=e.parentNode.childNodes;if(e.parentNode){while(r[++t]!==e){if(r[t].nodeType===1){n++}}return n}else{return-1}}function $(e,t){var n=D(e),i;switch(t){case"decimal":i=n;break;case"decimal-leading-zero":i=n.toString().length===1?n="0"+n.toString():n.toString();break;case"upper-roman":i=r.Generate.ListRoman(n);break;case"lower-roman":i=r.Generate.ListRoman(n).toLowerCase();break;case"lower-alpha":i=r.Generate.ListAlpha(n).toLowerCase();break;case"upper-alpha":i=r.Generate.ListAlpha(n);break}return i+". "}function G(e,t,n){var r,i,a=t.ctx,o=g(e,"listStyleType"),l;if(/^(decimal|decimal-leading-zero|upper-alpha|upper-latin|upper-roman|lower-alpha|lower-greek|lower-latin|lower-roman)$/i.test(o)){i=$(e,o);l=V(e,i);A(a,e,"none",g(e,"color"));if(g(e,"listStylePosition")==="inside"){a.setVariable("textAlign","left");r=n.left}else{return}z(i,r,l.bottom,a)}}function W(e){var t=i[e];return t&&t.succeeded===true?t.img:false}function H(e,t){var n=Math.max(e.left,t.left),r=Math.max(e.top,t.top),i=Math.min(e.left+e.width,t.left+t.width),a=Math.min(e.top+e.height,t.top+t.height);return{left:n,top:r,width:i-n,height:a-r}}function j(e,t,n){var r,i=t.cssPosition!=="static",a=i?g(e,"zIndex"):"auto",o=g(e,"opacity"),l=g(e,"cssFloat")!=="none";t.zIndex=r=q(a);r.isPositioned=i;r.isFloated=l;r.opacity=o;r.ownStacking=a!=="auto"||o<1;r.depth=n?n.zIndex.depth+1:0;if(n){n.zIndex.children.push(t)}}function q(e){return{depth:0,zindex:e,children:[]}}function X(e,t,n,r,i){var a=R(t,"paddingLeft"),o=R(t,"paddingTop"),l=R(t,"paddingRight"),s=R(t,"paddingBottom");oe(e,n,0,0,n.width,n.height,r.left+a+i[3].width,r.top+o+i[0].width,r.width-(i[1].width+i[3].width+a+l),r.height-(i[0].width+i[2].width+o+s))}function _(e){return["Top","Right","Bottom","Left"].map(function(t){return{width:R(e,"border"+t+"Width"),color:g(e,"border"+t+"Color")}})}function Y(e){return["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(t){return g(e,"border"+t+"Radius")})}function Q(e,t,n,r){var i=4*((Math.sqrt(2)-1)/3);var a=n*i,o=r*i,l=e+n,s=t+r;return{topLeft:J({x:e,y:s},{x:e,y:s-o},{x:l-a,y:t},{x:l,y:t}),topRight:J({x:e,y:t},{x:e+a,y:t},{x:l,y:s-o},{x:l,y:s}),bottomRight:J({x:l,y:t},{x:l,y:t+o},{x:e+a,y:s},{x:e,y:s}),bottomLeft:J({x:l,y:s},{x:l-a,y:s},{x:e,y:t+o},{x:e,y:t})}}function J(e,t,n,r){var i=function(e,t,n){return{x:e.x+(t.x-e.x)*n,y:e.y+(t.y-e.y)*n}};return{start:e,startControl:t,endControl:n,end:r,subdivide:function(a){var o=i(e,t,a),l=i(t,n,a),s=i(n,r,a),c=i(o,l,a),d=i(l,s,a),f=i(c,d,a);return[J(e,o,c,f),J(f,d,s,r)]},curveTo:function(e){e.push(["bezierCurve",t.x,t.y,n.x,n.y,r.x,r.y])},curveToReversed:function(r){r.push(["bezierCurve",n.x,n.y,t.x,t.y,e.x,e.y])}}}function K(e,t,n,r,i,a,o){if(t[0]>0||t[1]>0){e.push(["line",r[0].start.x,r[0].start.y]);r[0].curveTo(e);r[1].curveTo(e)}else{e.push(["line",a,o])}if(n[0]>0||n[1]>0){e.push(["line",i[0].start.x,i[0].start.y])}}function Z(e,t,n,r,i,a,o){var l=[];if(t[0]>0||t[1]>0){l.push(["line",r[1].start.x,r[1].start.y]);r[1].curveTo(l)}else{l.push(["line",e.c1[0],e.c1[1]])}if(n[0]>0||n[1]>0){l.push(["line",a[0].start.x,a[0].start.y]);a[0].curveTo(l);l.push(["line",o[0].end.x,o[0].end.y]);o[0].curveToReversed(l)}else{l.push(["line",e.c2[0],e.c2[1]]);l.push(["line",e.c3[0],e.c3[1]])}if(t[0]>0||t[1]>0){l.push(["line",i[1].end.x,i[1].end.y]);i[1].curveToReversed(l)}else{l.push(["line",e.c4[0],e.c4[1]])}return l}function ee(e,t,n){var r=e.left,i=e.top,a=e.width,o=e.height,l=t[0][0],s=t[0][1],c=t[1][0],d=t[1][1],f=t[2][0],u=t[2][1],h=t[3][0],p=t[3][1],g=a-c,m=o-u,y=a-f,b=o-p;return{topLeftOuter:Q(r,i,l,s).topLeft.subdivide(.5),topLeftInner:Q(r+n[3].width,i+n[0].width,Math.max(0,l-n[3].width),Math.max(0,s-n[0].width)).topLeft.subdivide(.5),topRightOuter:Q(r+g,i,c,d).topRight.subdivide(.5),topRightInner:Q(r+Math.min(g,a+n[3].width),i+n[0].width,g>a+n[3].width?0:c-n[3].width,d-n[0].width).topRight.subdivide(.5),bottomRightOuter:Q(r+y,i+m,f,u).bottomRight.subdivide(.5),bottomRightInner:Q(r+Math.min(y,a+n[3].width),i+Math.min(m,o+n[0].width),Math.max(0,f-n[1].width),Math.max(0,u-n[2].width)).bottomRight.subdivide(.5),bottomLeftOuter:Q(r,i+b,h,p).bottomLeft.subdivide(.5),bottomLeftInner:Q(r+n[3].width,i+b,Math.max(0,h-n[3].width),Math.max(0,p-n[2].width)).bottomLeft.subdivide(.5)}}function te(e,t,n,r,i){var a=g(e,"backgroundClip"),o=[];switch(a){case"content-box":case"padding-box":K(o,r[0],r[1],t.topLeftInner,t.topRightInner,i.left+n[3].width,i.top+n[0].width);K(o,r[1],r[2],t.topRightInner,t.bottomRightInner,i.left+i.width-n[1].width,i.top+n[0].width);K(o,r[2],r[3],t.bottomRightInner,t.bottomLeftInner,i.left+i.width-n[1].width,i.top+i.height-n[2].width);K(o,r[3],r[0],t.bottomLeftInner,t.topLeftInner,i.left+n[3].width,i.top+i.height-n[2].width);break;default:K(o,r[0],r[1],t.topLeftOuter,t.topRightOuter,i.left,i.top);K(o,r[1],r[2],t.topRightOuter,t.bottomRightOuter,i.left+i.width,i.top);K(o,r[2],r[3],t.bottomRightOuter,t.bottomLeftOuter,i.left+i.width,i.top+i.height);K(o,r[3],r[0],t.bottomLeftOuter,t.topLeftOuter,i.left,i.top+i.height);break}return o}function ne(e,t,n){var r=t.left,i=t.top,a=t.width,o=t.height,l,s,c,d,f,u,h=Y(e),p=ee(t,h,n),g={clip:te(e,p,n,h,t),borders:[]};for(l=0;l<4;l++){if(n[l].width>0){s=r;c=i;d=a;f=o-n[2].width;switch(l){case 0:f=n[0].width;u=Z({c1:[s,c],c2:[s+d,c],c3:[s+d-n[1].width,c+f],c4:[s+n[3].width,c+f]},h[0],h[1],p.topLeftOuter,p.topLeftInner,p.topRightOuter,p.topRightInner);break;case 1:s=r+a-n[1].width;d=n[1].width;u=Z({c1:[s+d,c],c2:[s+d,c+f+n[2].width],c3:[s,c+f],c4:[s,c+n[0].width]},h[1],h[2],p.topRightOuter,p.topRightInner,p.bottomRightOuter,p.bottomRightInner);break;case 2:c=c+o-n[2].width;f=n[2].width;u=Z({c1:[s+d,c+f],c2:[s,c+f],c3:[s+n[3].width,c],c4:[s+d-n[3].width,c]},h[2],h[3],p.bottomRightOuter,p.bottomRightInner,p.bottomLeftOuter,p.bottomLeftInner);break;case 3:d=n[3].width;u=Z({c1:[s,c+f+n[2].width],c2:[s,c],c3:[s+d,c+n[0].width],c4:[s+d,c+f]},h[3],h[0],p.bottomLeftOuter,p.bottomLeftInner,p.topLeftOuter,p.topLeftInner);break}g.borders.push({args:u,color:n[l].color})}}return g}function re(e,t){var n=e.drawShape();t.forEach(function(e,t){n[t===0?"moveTo":e[0]+"To"].apply(null,e.slice(1))});return n}function ie(e,t,n){if(n!=="transparent"){e.setVariable("fillStyle",n);re(e,t);e.fill();s+=1}}function ae(e,t,n){var r=c.createElement("valuewrap"),i=["lineHeight","textAlign","fontFamily","color","fontSize","paddingLeft","paddingTop","width","height","border","borderLeftWidth","borderTopWidth"],a,o;i.forEach(function(t){try{r.style[t]=g(e,t)}catch(e){d.log("html2canvas: Parse: Exception caught in renderFormValue: "+e.message)}});r.style.borderColor="black";r.style.borderStyle="solid";r.style.display="block";r.style.position="absolute";if(/^(submit|reset|button|text|password)$/.test(e.type)||e.nodeName==="SELECT"){r.style.lineHeight=g(e,"height")}r.style.top=t.top+"px";r.style.left=t.left+"px";a=e.nodeName==="SELECT"?(e.options[e.selectedIndex]||0).text:e.value;if(!a){a=e.placeholder}o=c.createTextNode(a);r.appendChild(o);p.appendChild(r);F(e,o,n);p.removeChild(r)}function oe(e){e.drawImage.apply(e,Array.prototype.slice.call(arguments,1));s+=1}function le(n,r){var i=e.getComputedStyle(n,r);var a=e.getComputedStyle(n);if(!i||!i.content||i.content==="none"||i.content==="-moz-alt-content"||i.display==="none"||a.content===i.content){return}var o=i.content+"";if(o[0]==="'"||o[0]==='"'){o=o.replace(/(^['"])|(['"]$)/g,"")}var l=o.substr(0,3)==="url",s=t.createElement(l?"img":"span");s.className=m+"-element ";Object.keys(i).filter(se).forEach(function(e){try{s.style[e]=i[e]}catch(t){d.log(["Tried to assign readonly property ",e,"Error:",t])}});if(l){s.src=d.parseBackgroundImage(o)[0].args[0]}else{s.innerHTML=o}return s}function se(t){return isNaN(e.parseInt(t,10))}function ce(e,t,n,r){var i=Math.round(r.left+n.left),a=Math.round(r.top+n.top);e.createPattern(t);e.translate(i,a);e.fill();e.translate(-i,-a)}function de(e,t,n,r,i,a,o,l){var s=[];s.push(["line",Math.round(i),Math.round(a)]);s.push(["line",Math.round(i+o),Math.round(a)]);s.push(["line",Math.round(i+o),Math.round(l+a)]);s.push(["line",Math.round(i),Math.round(l+a)]);re(e,s);e.save();e.clip();ce(e,t,n,r);e.restore()}function fe(e,t,n){M(e,t.left,t.top,t.width,t.height,n)}function ue(e,t,n,r,i){var a=d.BackgroundSize(e,t,r,i),o=d.BackgroundPosition(e,t,r,i,a),l=d.BackgroundRepeat(e,i);r=pe(r,a);switch(l){case"repeat-x":case"repeat no-repeat":de(n,r,o,t,t.left,t.top+o.top,99999,r.height);break;case"repeat-y":case"no-repeat repeat":de(n,r,o,t,t.left+o.left,t.top,r.width,99999);break;case"no-repeat":de(n,r,o,t,t.left+o.left,t.top+o.top,r.width,r.height);break;default:ce(n,r,o,{top:t.top,left:t.left,width:r.width,height:r.height});break}}function he(e,t,n){var r=g(e,"backgroundImage"),i=d.parseBackgroundImage(r),a,o=i.length;while(o--){r=i[o];if(!r.args||r.args.length===0){continue}var l=r.method==="url"?r.args[0]:r.value;a=W(l);if(a){ue(e,t,n,a,o)}else{d.log("html2canvas: Error loading background:",r)}}}function pe(e,t){if(e.width===t.width&&e.height===t.height){return e}var n,r=c.createElement("canvas");r.width=t.width;r.height=t.height;n=r.getContext("2d");oe(n,e,0,0,e.width,e.height,0,0,t.width,t.height);return r}function ge(e,t,n){return e.setVariable("globalAlpha",g(t,"opacity")*(n?n.opacity:1))}function me(e){return e.replace("px","")}function ye(e,t){var n=/(matrix)\((.+)\)/;var r=g(e,"transform")||g(e,"-webkit-transform")||g(e,"-moz-transform")||g(e,"-ms-transform")||g(e,"-o-transform");var i=g(e,"transform-origin")||g(e,"-webkit-transform-origin")||g(e,"-moz-transform-origin")||g(e,"-ms-transform-origin")||g(e,"-o-transform-origin")||"0px 0px";i=i.split(" ").map(me).map(d.asFloat);var a;if(r&&r!=="none"){var o=r.match(n);if(o){switch(o[1]){case"matrix":a=o[2].split(",").map(d.trimText).map(d.asFloat);break}}}return{origin:i,matrix:a}}function be(e,t,n,r){var i=f(!t?S():n.width,!t?E():n.height),o={ctx:i,opacity:ge(i,e,t),cssPosition:g(e,"position"),borders:_(e),transform:r,clip:t&&t.clip?d.Extend({},t.clip):null};j(e,o,t);if(a.useOverflow===true&&/(hidden|scroll|auto)/.test(g(e,"overflow"))===true&&/(BODY)/i.test(e.nodeName)===false){o.clip=o.clip?H(o.clip,n):n}return o}function we(e,t,n){var r={left:t.left+e[3].width,top:t.top+e[0].width,width:t.width-(e[1].width+e[3].width),height:t.height-(e[0].width+e[2].width)};if(n){r=H(r,n)}return r}function xe(e,t){var n=t.matrix?d.OffsetBounds(e):d.Bounds(e);t.origin[0]+=n.left;t.origin[1]+=n.top;return n}function ve(e,t,n){var r=ye(e,t),i=xe(e,r),a,o=be(e,t,i,r),l=o.borders,s=o.ctx,c=we(l,i,o.clip),f=ne(e,i,l),u=h.test(e.nodeName)?"#efefef":g(e,"backgroundColor");re(s,f.clip);s.save();s.clip();if(c.height>0&&c.width>0&&!n){fe(s,i,u);he(e,c,s)}else if(n){o.backgroundColor=u}s.restore();f.borders.forEach(function(e){ie(s,e.args,e.color)});switch(e.nodeName){case"IMG":if(a=W(e.getAttribute("src"))){X(s,e,a,i,l)}else{d.log("html2canvas: Error loading <img>:"+e.getAttribute("src"))}break;case"INPUT":if(/^(text|url|email|submit|button|reset)$/.test(e.type)&&(e.value||e.placeholder||"").length>0){ae(e,i,o)}break;case"TEXTAREA":if((e.value||e.placeholder||"").length>0){ae(e,i,o)}break;case"SELECT":if((e.options||e.placeholder||"").length>0){ae(e,i,o)}break;case"LI":G(e,o,c);break;case"CANVAS":X(s,e,e,i,l);break}return o}function ke(e){return g(e,"display")!=="none"&&g(e,"visibility")!=="hidden"&&!e.hasAttribute("data-html2canvas-ignore")}function Ce(e,t,n){if(!n){n=function(){}}if(ke(e)){t=ve(e,t,false)||t;if(!h.test(e.nodeName)){return Te(e,t,n)}}n()}function Te(e,t,n){var r=d.Children(e);var i=r.length+1;l();if(a.async){r.forEach(function(e){setTimeout(function(){o(e)},0)})}else{r.forEach(o)}function o(n){if(n.nodeType===n.ELEMENT_NODE){Ce(n,t,l)}else if(n.nodeType===n.TEXT_NODE){F(e,n,t);l()}else{l()}}function l(e){if(--i<=0){d.log("finished rendering "+r.length+" children.");n()}}}};r.Preload=function(i){var a={numLoaded:0,numFailed:0,numTotal:0,cleanupDone:false},o,l=r.Util,s,c,d=0,f=i.elements[0]||t.body,u=f.ownerDocument,h=f.getElementsByTagName("img"),p=h.length,g=u.createElement("a"),m=function(e){return e.crossOrigin!==n}(new Image),y;g.href=e.location.href;o=g.protocol+g.host;function b(e){g.href=e;g.href=g.href;var t=g.protocol+g.host;return t===o}function w(){l.log("html2canvas: start: images: "+a.numLoaded+" / "+a.numTotal+" (failed: "+a.numFailed+")");if(!a.firstRun&&a.numLoaded>=a.numTotal){l.log("Finished loading images: # "+a.numTotal+" (failed: "+a.numFailed+")");if(typeof i.complete==="function"){i.complete(a)}}}function x(t,r,o){var l,s=i.proxy,c;g.href=t;t=g.href;l="html2canvas_"+d++;o.callbackname=l;if(s.indexOf("?")>-1){s+="&"}else{s+="?"}s+="url="+encodeURIComponent(t)+"&callback="+l;c=u.createElement("script");e[l]=function(t){if(t.substring(0,6)==="error:"){o.succeeded=false;a.numLoaded++;a.numFailed++;w()}else{R(r,o);r.src=t}e[l]=n;try{delete e[l]}catch(e){}c.parentNode.removeChild(c);c=null;delete o.script;delete o.callbackname};c.setAttribute("type","text/javascript");c.setAttribute("src",s);o.script=c;e.document.body.appendChild(c)}function v(t,n){var i=e.getComputedStyle(t,n),a=i.content;if(a.substr(0,3)==="url"){s.loadImage(r.Util.parseBackgroundImage(a)[0].args[0])}S(i.backgroundImage,t)}function k(e){v(e,":before");v(e,":after")}function C(e,t){var i=r.Generate.Gradient(e,t);if(i!==n){a[e]={img:i,succeeded:true};a.numTotal++;a.numLoaded++;w()}}function T(e){return e&&e.method&&e.args&&e.args.length>0}function S(e,t){var i;r.Util.parseBackgroundImage(e).filter(T).forEach(function(e){if(e.method==="url"){s.loadImage(e.args[0])}else if(e.method.match(/\-?gradient$/)){if(i===n){i=r.Util.Bounds(t)}C(e.value,i)}})}function E(e){var t=false;try{l.Children(e).forEach(E)}catch(e){}try{t=e.nodeType}catch(e){t=false;l.log("html2canvas: failed to access some element's nodeType - Exception: "+e.message)}if(t===1||t===n){k(e);try{S(l.getCSS(e,"backgroundImage"),e)}catch(e){l.log("html2canvas: failed to get background-image - Exception: "+e.message)}S(e)}}function R(t,r){t.onload=function(){if(r.timer!==n){e.clearTimeout(r.timer)}a.numLoaded++;r.succeeded=true;t.onerror=t.onload=null;w()};t.onerror=function(){if(t.crossOrigin==="anonymous"){e.clearTimeout(r.timer);if(i.proxy){var n=t.src;t=new Image;r.img=t;t.src=n;x(t.src,t,r);return}}a.numLoaded++;a.numFailed++;r.succeeded=false;t.onerror=t.onload=null;w()}}s={loadImage:function(e){var t,r;if(e&&a[e]===n){t=new Image;if(e.match(/data:image\/.*;base64,/i)){t.src=e.replace(/url\(['"]{0,}|['"]{0,}\)$/gi,"");r=a[e]={img:t};a.numTotal++;R(t,r)}else if(b(e)||i.allowTaint===true){r=a[e]={img:t};a.numTotal++;R(t,r);t.src=e}else if(m&&!i.allowTaint&&i.useCORS){t.crossOrigin="anonymous";r=a[e]={img:t};a.numTotal++;R(t,r);t.src=e}else if(i.proxy){r=a[e]={img:t};a.numTotal++;x(e,t,r)}}},cleanupDOM:function(r){var o,s;if(!a.cleanupDone){if(r&&typeof r==="string"){l.log("html2canvas: Cleanup because: "+r)}else{l.log("html2canvas: Cleanup after timeout: "+i.timeout+" ms.")}for(s in a){if(a.hasOwnProperty(s)){o=a[s];if(typeof o==="object"&&o.callbackname&&o.succeeded===n){e[o.callbackname]=n;try{delete e[o.callbackname]}catch(e){}if(o.script&&o.script.parentNode){o.script.setAttribute("src","about:blank");o.script.parentNode.removeChild(o.script)}a.numLoaded++;a.numFailed++;l.log("html2canvas: Cleaned up failed img: '"+s+"' Steps: "+a.numLoaded+" / "+a.numTotal)}}}if(e.stop!==n){e.stop()}else if(t.execCommand!==n){t.execCommand("Stop",false)}if(t.close!==n){t.close()}a.cleanupDone=true;if(!(r&&typeof r==="string")){w()}}},renderingDone:function(){if(y){e.clearTimeout(y)}}};if(i.timeout>0){y=e.setTimeout(s.cleanupDOM,i.timeout)}l.log("html2canvas: Preload starts: finding background-images");a.firstRun=true;E(f);l.log("html2canvas: Preload: Finding images");for(c=0;c<p;c+=1){s.loadImage(h[c].getAttribute("src"))}a.firstRun=false;l.log("html2canvas: Preload: Done.");if(a.numTotal===a.numLoaded){w()}return s};r.Renderer=function(e,i){function a(e,t){if(e==="children"){return-1}else if(t==="children"){return 1}else{return e-t}}function o(e){var t=[],r;r=function e(t){var r={};function i(e,t,r){var a=t.zIndex.zindex==="auto"?0:Number(t.zIndex.zindex),o=e,l=t.zIndex.isPositioned,s=t.zIndex.isFloated,c={node:t},d=r;if(t.zIndex.ownStacking){o=c.context={children:[{node:t,children:[]}]};d=n}else if(l||s){d=c.children=[]}if(a===0&&r){r.push(c)}else{if(!e[a]){e[a]=[]}e[a].push(c)}t.zIndex.children.forEach(function(e){i(o,e,d)})}i(r,t);return r}(e);function i(e){Object.keys(e).sort(a).forEach(function(n){var r=[],a=[],o=[],l=[];e[n].forEach(function(e){if(e.node.zIndex.isPositioned||e.node.zIndex.opacity<1){o.push(e)}else if(e.node.zIndex.isFloated){a.push(e)}else{r.push(e)}});(function e(t){t.forEach(function(t){l.push(t);if(t.children){e(t.children)}})})(r.concat(a,o));l.forEach(function(e){if(e.context){i(e.context)}else{t.push(e.node)}})})}i(r);return t}function l(e){var t;if(typeof i.renderer==="string"&&r.Renderer[e]!==n){t=r.Renderer[e](i)}else if(typeof e==="function"){t=e(i)}else{throw new Error("Unknown renderer")}if(typeof t!=="function"){throw new Error("Invalid renderer defined")}return t}return l(i.renderer)(e,i,t,o(e.stack),r)};r.Util.Support=function(e,t){function i(){var e=new Image,i=t.createElement("canvas"),a=i.getContext===n?false:i.getContext("2d");if(a===false){return false}i.width=i.height=10;e.src=["data:image/svg+xml,","<svg xmlns='http://www.w3.org/2000/svg' width='10' height='10'>","<foreignObject width='10' height='10'>","<div xmlns='http://www.w3.org/1999/xhtml' style='width:10;height:10;'>","sup","</div>","</foreignObject>","</svg>"].join("");try{a.drawImage(e,0,0);i.toDataURL()}catch(e){return false}r.Util.log("html2canvas: Parse: SVG powered rendering available");return true}function a(){var e,n,r,i,a=false;if(t.createRange){e=t.createRange();if(e.getBoundingClientRect){n=t.createElement("boundtest");n.style.height="123px";n.style.display="block";t.body.appendChild(n);e.selectNode(n);r=e.getBoundingClientRect();i=r.height;if(i===123){a=true}t.body.removeChild(n)}}return a}return{rangeBounds:a(),svgRendering:e.svgRendering&&i()}};e.html2canvas=function(t,n){t=t.length?t:[t];var i,a,o={logging:false,elements:t,background:"#fff",proxy:null,timeout:0,useCORS:false,allowTaint:false,svgRendering:false,ignoreElements:"IFRAME|OBJECT|PARAM",useOverflow:true,letterRendering:false,chinese:false,async:false,width:null,height:null,taintTest:true,renderer:"Canvas"};o=r.Util.Extend(n,o);r.logging=o.logging;o.complete=function(e){if(typeof o.onpreloaded==="function"){if(o.onpreloaded(e)===false){return}}r.Parse(e,o,function(e){if(typeof o.onparsed==="function"){if(o.onparsed(e)===false){return}}a=r.Renderer(e,o);if(typeof o.onrendered==="function"){o.onrendered(a)}})};e.setTimeout(function(){r.Preload(o)},0);return{render:function(e,t){return r.Renderer(e,r.Util.Extend(t,o))},parse:function(e,t){return r.Parse(e,r.Util.Extend(t,o))},preload:function(e){return r.Preload(r.Util.Extend(e,o))},log:r.Util.log}};e.html2canvas.log=r.Util.log;e.html2canvas.Renderer={Canvas:n};r.Renderer.Canvas=function(e){e=e||{};var i=t,a=[],o=t.createElement("canvas"),l=o.getContext("2d"),s=r.Util,c=e.canvas||i.createElement("canvas");function d(e,t){e.beginPath();t.forEach(function(t){e[t.name].apply(e,t["arguments"])});e.closePath()}function f(e){if(a.indexOf(e["arguments"][0].src)===-1){l.drawImage(e["arguments"][0],0,0);try{l.getImageData(0,0,1,1)}catch(e){o=i.createElement("canvas");l=o.getContext("2d");return false}a.push(e["arguments"][0].src)}return true}function u(t,n){switch(n.type){case"variable":t[n.name]=n["arguments"];break;case"function":switch(n.name){case"createPattern":if(n["arguments"][0].width>0&&n["arguments"][0].height>0){try{t.fillStyle=t.createPattern(n["arguments"][0],"repeat")}catch(e){s.log("html2canvas: Renderer: Error creating pattern",e.message)}}break;case"drawShape":d(t,n["arguments"]);break;case"drawImage":if(n["arguments"][8]>0&&n["arguments"][7]>0){if(!e.taintTest||e.taintTest&&f(n)){t.drawImage.apply(t,n["arguments"])}}break;default:t[n.name].apply(t,n["arguments"])}break}}return function(e,t,r,i,a){var o=c.getContext("2d"),l,d,f,h=e.stack;c.width=c.style.width=t.width||h.ctx.width;c.height=c.style.height=t.height||h.ctx.height;f=o.fillStyle;o.fillStyle=s.isTransparent(e.backgroundColor)&&t.background!==n?t.background:e.backgroundColor;o.fillRect(0,0,c.width,c.height);o.fillStyle=f;i.forEach(function(e){o.textBaseline="bottom";o.save();if(e.transform.matrix){o.translate(e.transform.origin[0],e.transform.origin[1]);o.transform.apply(o,e.transform.matrix);o.translate(-e.transform.origin[0],-e.transform.origin[1])}if(e.clip){o.beginPath();o.rect(e.clip.left,e.clip.top,e.clip.width,e.clip.height);o.clip()}if(e.ctx.storage){e.ctx.storage.forEach(function(e){u(o,e)})}o.restore()});s.log("html2canvas: Renderer: Canvas renderer done - returning canvas obj");if(t.elements.length===1){if(typeof t.elements[0]==="object"&&t.elements[0].nodeName!=="BODY"){d=a.Util.Bounds(t.elements[0]);l=r.createElement("canvas");l.width=Math.ceil(d.width);l.height=Math.ceil(d.height);o=l.getContext("2d");o.drawImage(c,d.left,d.top,d.width,d.height,0,0,d.width,d.height);c=null;return l}}return c}}})(window,document);