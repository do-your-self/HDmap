(function(t){function e(e){var n=t(this).data(b),o=f[n.t],s=o.g[n.i];s.ox=e.pageX;s.l=s[I]()[W];c[k](q+b,r)[k](G+b,i);T[S](y+"*{cursor:"+o.opt.dragCursor+X+O);s[z](o.opt.draggingClass);g=s;if(o.c[n.i].l)for(e=0;e<o.ln;e++)n=o.c[e],n.l=l,n.w=n[w]();return l}function i(e){c.unbind(q+b).unbind(G+b);t("head :last-child").remove();if(g){g[D](g.t.opt.draggingClass);var i=g.t,r=i.opt.onResize;g.x&&(n(i,g.i,1),o(i),r&&(e[H]=i[0],r(e)));i.p&&Q&&s(i);g=d}}function r(t){if(g){var e=g.t,i=t.pageX-g.ox+g.l,r=e.opt.minWidth,s=g.i,a=1.5*e.cs+r+e.b,c=s==e.ln-1?e.w-a:e.g[s+1][I]()[W]-e.cs-r,r=s?e.g[s-1][I]()[W]+e.cs+r:a,i=C.max(r,C.min(c,i));g.x=i;g.css(W,i+u);if(e.opt.liveDrag&&(n(e,s),o(e),i=e.opt.onDrag))t[H]=e[0],i(t)}return l}function n(t,e,i){var r=g.x-g.l,n=t.c[e],o=t.c[e+1],s=n.w+r,r=o.w-r;n[w](s+u);o[w](r+u);t.cg.eq(e)[w](s+u);t.cg.eq(e+1)[w](r+u);if(i)n.w=s,o.w=r}function o(t){t.gc[w](t.w);for(var e=0;e<t.ln;e++){var i=t.c[e];t.g[e].css({left:i.offset().left-t.offset()[W]+i.outerWidth()+t.cs/2+u,height:t.opt.headerOnly?t.c[0].outerHeight():t.outerHeight()})}}function s(t,e){var i,r=0,n=0,o=[];if(e)if(t.cg[Z](w),t.opt.flush)Q[t.id]="";else{for(i=Q[t.id].split(";");n<t.ln;n++)o[L](100*i[n]/i[t.ln]+"%"),e.eq(n).css(w,o[n]);for(n=0;n<t.ln;n++)t.cg.eq(n).css(w,o[n])}else{Q[t.id]="";for(n in t.c)i=t.c[n][w](),Q[t.id]+=i+";",r+=i;Q[t.id]+=r}}function a(i){var r=">thead>tr>",n='"></div>',a=">tbody>tr:first>",c=">tr:first>",l="td",d="th",g=i.find(r+d+","+r+l);g.length||(g=i.find(a+d+","+c+d+","+a+l+","+c+l));i.cg=i.find("col");i.ln=g.length;i.p&&Q&&Q[i.id]&&s(i,g);g.each(function(r){var o=t(this),s=t(i.gc[S](x+"CRG"+n)[0].lastChild);s.t=i;s.i=r;s.c=o;o.w=o[w]();i.g[L](s);i.c[L](o);o[w](o.w)[Z](w);if(r<i.ln-1)s.mousedown(e)[S](i.opt.gripInnerHtml)[S](x+b+'" style="cursor:'+i.opt.hoverCursor+n);else s[z]("CRL")[D]("CRG");s.data(b,{i:r,t:i[R](p)})});i.cg[Z](w);o(i);i.find("td, th").not(g).not(M+"th, table td").each(function(){t(this)[Z](w)})}var c=t(document),l=!1,d=null,g=d,f=[],h=0,p="id",u="px",b="CRZ",v=parseInt,C=Math,m=t.browser.msie,w="width",R="attr",x='<div class="',y="<style type='text/css'>",L="push",S="append",D="removeClass",z="addClass",Z="removeAttr",k="bind",q="mousemove.",G="mouseup.",H="currentTarget",W="left",I="position",O="}</style>",X="!important;",j=":0px"+X,A="resize",M="table",Q,T=t("head")[S](y+".CRZ{table-layout:fixed;}.CRZ td,.CRZ th{padding-"+W+j+"padding-right"+j+"overflow:hidden}.CRC{height:0px;"+I+":relative;}.CRG{margin-left:-5px;"+I+":absolute;z-index:5;}.CRG .CRZ{"+I+":absolute;background-color:red;filter:alpha(opacity=1);opacity:0;width:10px;height:100%;top:0px}.CRL{"+I+":absolute;width:1px}.CRD{ border-left:1px dotted black"+O);try{Q=sessionStorage}catch(t){}t(window)[k](A+"."+b,function(){for(t in f){var t=f[t],e,i=0;t[D](b);if(t.w!=t[w]()){t.w=t[w]();for(e=0;e<t.ln;e++)i+=t.c[e].w;for(e=0;e<t.ln;e++)t.c[e].css(w,C.round(1e3*t.c[e].w/i)/10+"%").l=1}o(t[z](b))}});t.fn.extend({colResizable:function(e){e=t.extend({draggingClass:"CRD",gripInnerHtml:"",liveDrag:l,minWidth:15,headerOnly:l,hoverCursor:"e-"+A,dragCursor:"e-"+A,postbackSafe:l,flush:l,marginLeft:d,marginRight:d,disable:l,onDrag:d,onResize:d},e);return this.each(function(){var i=e,r=t(this);if(i.disable){if(r=r[R](p),(i=f[r])&&i.is(M))i[D](b).gc.remove(),delete f[r]}else{var n=r.id=r[R](p)||b+h++;r.p=i.postbackSafe;if(r.is(M)&&!f[n])r[z](b)[R](p,n).before(x+'CRC"/>'),r.opt=i,r.g=[],r.c=[],r.w=r[w](),r.gc=r.prev(),i.marginLeft&&r.gc.css("marginLeft",i.marginLeft),i.marginRight&&r.gc.css("marginRight",i.marginRight),r.cs=v(m?this.cellSpacing||this.currentStyle.borderSpacing:r.css("border-spacing"))||2,r.b=v(m?this.border||this.currentStyle.borderLeftWidth:r.css("border-"+W+"-"+w))||1,f[n]=r,a(r)}})}})})(jQuery);